= link_to 'Promoted by Third Parties', discussions_url(other_promoted: true), class: 'btn btn-primary'

= link_to 'Predicted to Trend', discussions_url(predicted: true), class: 'btn btn-primary'

- if @predicted == 'true'
  %div.float-right
    = form_tag discussions_path, method: :get do
      = hidden_field_tag :predicted, true
      Tag:
      = select_tag 'tag', tags_for_select(@tag)
      = submit_tag 'Query', class: 'btn btn-primary'

%hr

- if @other_promoted == 'true'
  .jumbotron
    %h4 These posts have been promoted by someone other than the author ...

- if @predicted == 'true'
  .jumbotron
    - if @discussions.any?
      %h4 This is list of new posts and their predicted payout based on analysis of the current trending posts ...
    - else
      %h4 Unable to do prediction right now.  This might be because there were no posts trending for this tag or no new posts to make a prediction on.

%small
  %ul
    - @discussions.group_by{ |d| group_pattern(d) }.each do |group|
      - key = group.first
      - duration = key.first
      - from = key.second
      - amount = key.last
      %li
        - if @other_promoted == 'true'
          #{duration} ago, #{link_to from, "http://steemit.com/@#{from}"} paid #{amount}
        - else
          #{duration} from now, will rise by: #{amount} SBD
        - if group.last.size == 1
          - discussion = group.last.last
          \-
          = link_to discussion[:slug], discussion[:url]
        - else
          %ul
            - group.last.each do |discussion|
              %li
                = link_to discussion[:slug], discussion[:url]

- if @other_promoted == 'true'
  See:
  = link_to "How to Find Post Promotions Paid by a Third Party in Ruby", "https://steemit.com/radiator/@inertia/how-to-find-post-promotions-paid-by-a-third-party-in-ruby"
  
- if @predicted == 'true'
  See:
  = link_to "How to Use AI to Find Articles with Ruby", "https://steemit.com/radiator/@inertia/how-to-use-ai-to-find-articles-with-ruby"